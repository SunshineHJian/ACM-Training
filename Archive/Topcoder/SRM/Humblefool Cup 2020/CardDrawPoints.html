<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
You have a deck of cards. 
Each card has a point value that is a small non-negative integer.
For each valid value v, <b>count</b>[v] is the count of cards with value v in your deck.
</p>
<p>
You will now play a game.
In the game you draw cards from the deck at random until you either decide to stop (in which case your score is the total value of the cards you have drawn) or until you draw two cards with the same value (in which case the game ends and your score is zero).
A more formal description of the game follows.
</p>
<p>
At the beginning of the game all cards are in the deck and the deck is shuffled uniformly at random.
The game consists of one or more turns.
In each turn you make a choice: terminate the game, or draw one more card?
If you terminate the game this way, your score is equal to the total value of the cards you hold in your hand.
If you choose to draw, you take the top card from the deck and add it to your hand.
If you drew a card whose value matches another card in your hand, you lose, the game ends and your score is zero.
If there are no more cards left in the deck, you must choose to terminate the game (as you cannot draw).
</p>
<p>
You are given the vector &lt;int&gt; <b>count</b> that describes the deck.
Assuming you play optimally, what is your expected score in this game?
</p>

</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>CardDrawPoints</td></tr><tr><td>Method:</td><td>expectedScore</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double expectedScore(vector &lt;int&gt; count)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>The return value must have an absolute or a relative error at most 1e-9.</td></tr><tr><td align="center" valign="top">-</td><td>By "play the game optimally" we mean that your goal is to maximize your expected score and with that goal in mind you make the optimal decisions when to terminate the game and when to draw one more card.</td></tr><tr><td align="center" valign="top">-</td><td>You know the exact contents of your deck and you use this knowledge when making decisions.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>count</b> will contain between 1 and 16 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>count</b> will be between 0 and 10, inclusive.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.0</pre></td></tr><tr><td><table><tr><td colspan="2">The deck is empty. In the very first round of the game you must choose to terminate the game (as you cannot draw) and your score is therefore guaranteed to be zero.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1, 1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.0</pre></td></tr><tr><td><table><tr><td colspan="2">The deck contains one card with value 0 and one card with value 1. One possible optimal strategy is "draw until you get the card with value 1, then stop". With this strategy you are guaranteed the score 1.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{ 1, 1, 1 }</pre></td></tr></table></td></tr><tr><td><pre>Returns: 3.0</pre></td></tr><tr><td><table><tr><td colspan="2">The deck contains a card with value 0, a card with value 1, and a card with value 2. One optimal strategy is "draw all three cards, then stop".</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{ 1, 3 }</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.0</pre></td></tr><tr><td><table><tr><td colspan="2">This deck contains one card with value 0 and three cards with value 1 each. The optimal strategy is to stop as soon as you draw one of the cards worth 1: at that point you have nothing to gain by playing on.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 4, 0, 0, 0, 1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.4000000000000004</pre></td></tr><tr><td><table><tr><td colspan="2">There are four cards worth 1 each, and a single card worth 5.
<ul>
<li>
If your first draw is a 5, you should draw one more card (which is guaranteed to be a 1) and then stop.
</li>
<li>
If your first draw is a 1, you have two options: stay safe and take the guaranteed score 1, or risk another draw?
<br></br>
If you draw a second card, you can get the 5, but you are risking drawing another 1.
It turns out that the latter choice is better: you should risk it and draw a second card.
(With probability 1/4 you will draw the 5 and have a final score of 6, with probability 3/4 your final score will be 0.)
</li>
</ul></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">5)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 7, 0, 0, 0, 1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.625</pre></td></tr><tr><td><table><tr><td colspan="2">This time there are more cards with value 1. If your first draw is a 1, the risk no longer pays off, terminating the game is better than trying your luck.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">6)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{2, 2, 2, 2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 2.857142857142857</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
